<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GothGirls Live Feed</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Arial',sans-serif; background:#121212; color:#fff; min-height:100vh; overflow-x:hidden; scroll-behavior:smooth; }

/* Splash */
#splash {
    position:fixed; top:0; left:0; width:100%; height:100%;
    display:flex; justify-content:center; align-items:center;
    background:#121212; color:#ff69b4; font-size:3rem; opacity:1; transition: opacity 1s ease; z-index:9999;
}

/* Images container with CSS Grid */
#images {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 15px;
    width: 100vw;
    padding: 10px;
    margin-top: 20px;
    box-sizing: border-box;
}

/* Images */
#images img {
    width: 100%;
    border-radius: 15px;
    display: block;
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.6s ease;
}
#images img.visible{ opacity:1; transform: translateY(0); }
#images img.fade-in-top{ transform: translateY(-20px); }
#images img:hover{ transform: scale(1.05); }

/* Floating Menu */
#menuToggle {
    position:fixed; bottom:30px; right:30px; width:60px; height:60px;
    background:#ff69b4; border-radius:50%; cursor:pointer; display:flex; justify-content:center; align-items:center; font-size:30px; color:#fff; z-index:1000; transition: transform 0.3s ease;
}
#menuToggle:hover{ transform: scale(1.15) rotate(5deg); }

#menu {
    position:fixed; bottom:100px; right:30px; display:flex; flex-direction:column; gap:18px; opacity:0; pointer-events:none; transition: all 0.4s ease;
}
#menu.active{ opacity:1; pointer-events:auto; transform: translateY(0); }

.menu-item {
    width:55px; height:55px; border-radius:50%; background:#ff69b4; display:flex; justify-content:center; align-items:center; color:#fff; font-size:20px; text-decoration:none; position:relative; transition: transform 0.3s ease, background 0.3s ease;
}
.menu-item:hover{ transform: scale(1.2) translateY(-5px); background:#ff85c1; }

/* Back to Top button */
#backTop {
    position:fixed; bottom:100px; left:30px; width:50px; height:50px;
    background:#ff69b4; border-radius:50%; display:flex; justify-content:center; align-items:center; font-size:24px; color:#fff; cursor:pointer; opacity:0; transition: opacity 0.4s ease, transform 0.3s ease;
    z-index:1000;
}
#backTop:hover{ transform: scale(1.2); }
#backTop.show{ opacity:1; }

/* Footer overlay */
#footerOverlay {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: rgba(18,18,18,0.8);
    color: #ff69b4;
    text-align: center;
    padding: 8px 0;
    font-size: 16px;
    z-index: 999;
    pointer-events: none;
}
</style>
</head>
<body>

<div id="splash">gothbitch.es</div>
<div id="images"></div>

<!-- Floating Menu -->
<div id="menuToggle">☰</div>
<div id="menu">
    <a href="https://bready.lol" target="_blank" class="menu-item" data-tooltip="BREADY.LOL">B</a>
</div>

<!-- Back to Top -->
<div id="backTop">↑</div>

<!-- Footer overlay -->
<div id="footerOverlay">Subreddit: r/GothGirls | Images loaded: 0</div>

<script>
const subreddit = 'GothGirls';
const imagesContainer = document.getElementById('images');
const backTop = document.getElementById('backTop');
let after = null;
let loading = false;
let allImages = [];

// Splash fade
window.addEventListener('load', ()=>{
    setTimeout(()=>{
        document.getElementById('splash').style.opacity=0;
        setTimeout(()=>document.getElementById('splash').remove(),1000);
    },2000);
});

// Menu toggle
document.getElementById('menuToggle').addEventListener('click', ()=> document.getElementById('menu').classList.toggle('active'));

// Back to Top
window.addEventListener('scroll', ()=>{
    if(window.scrollY > 400) backTop.classList.add('show');
    else backTop.classList.remove('show');
});
backTop.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

function shuffleArray(array){ return array.sort(()=>Math.random()-0.5); }

// Fetch images from subreddit
async function fetchImages(limit=30){
    if(loading) return [];
    loading = true;
    try {
        const url = after ? `https://www.reddit.com/r/${subreddit}/hot.json?limit=${limit}&after=${after}`
                          : `https://www.reddit.com/r/${subreddit}/hot.json?limit=${limit}`;
        const res = await fetch(url);
        const data = await res.json();
        after = data.data.after;
        return shuffleArray(data.data.children.map(post=>post.data.url).filter(url=>url.match(/\.(jpeg|jpg|gif|png)$/)));
    } catch(e){ console.error(e); return []; }
    finally { loading=false; }
}

// Lazy load using IntersectionObserver
const lazyLoadObserver = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
        if(entry.isIntersecting){
            const img = entry.target;
            if(img.dataset.src){
                img.src = img.dataset.src;
                img.onload = ()=> img.classList.add('visible');
                img.removeAttribute('data-src');
            }
        }
    });
},{rootMargin:'500px'});

// Add images to grid
async function addImages(count=30){
    const urls = await fetchImages(count);
    urls.forEach(url=>{
        const img = document.createElement('img');
        img.dataset.src = url;
        img.classList.add('fade-in-top');
        imagesContainer.appendChild(img);
        lazyLoadObserver.observe(img);
        allImages.push(img);
    });
    updateFooter();
}

// Infinite scroll: load more when near bottom
window.addEventListener('scroll', async ()=>{
    if(window.scrollY + window.innerHeight >= document.body.offsetHeight - 1000){
        addImages(30);
    }
});

// Initial load
addImages(50);

// Auto-refresh new images at top
setInterval(()=> addImages(10),30000);

function updateFooter(){
    document.getElementById('footerOverlay').textContent = `Subreddit: r/${subreddit} | Images loaded: ${allImages.length}`;
}
</script>
</body>
</html>
