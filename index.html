<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GothGirls Live Feed</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Arial',sans-serif; background:#121212; color:#fff; min-height:100vh; overflow-x:hidden; display:flex; flex-direction:column; align-items:center; scroll-behavior:smooth; }

/* Splash */
#splash {
    position:fixed; top:0; left:0; width:100%; height:100%;
    display:flex; justify-content:center; align-items:center;
    background:#121212; color:#ff69b4; font-size:3rem; opacity:1; transition: opacity 1s ease; z-index:9999;
}

/* Pinterest-style grid */
#images {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
    width: 98%;
    max-width: 3400px;
    margin-top: 20px;
    opacity: 0;
    transition: opacity 1s ease;
}

/* Images */
#images img {
    width: 100%;
    border-radius: 15px;
    display: block;
    opacity: 0;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    transition: transform 0.3s ease, opacity 0.6s ease, box-shadow 0.5s ease;
    position: relative;
}
#images img.fade-in-top{ transform: translateY(-20px); }
#images img.visible{ opacity:1; transform: translateY(0); }
#images img:hover{ transform: scale(1.06); box-shadow:0 10px 35px rgba(255,105,180,0.6); }
#images img::after{
    content:'';
    position:absolute; top:0; left:0; width:100%; height:100%; border-radius:15px;
    box-shadow:0 0 30px rgba(255,105,180,0.3); opacity:0; transition:opacity 0.3s ease;
}
#images img:hover::after{ opacity:1; }
.highlight{ box-shadow:0 0 35px 6px #ff69b4; }

/* Load More */
#loadMore { padding:14px 28px; font-size:17px; cursor:pointer; margin:20px; border:none; border-radius:12px; background:#ff69b4; color:#fff; transition: background 0.3s ease; }
#loadMore:hover{ background:#ff85c1; }

/* Floating Menu */
#menuToggle {
    position:fixed; bottom:30px; right:30px; width:60px; height:60px;
    background:#ff69b4; border-radius:50%; cursor:pointer; display:flex; justify-content:center; align-items:center; font-size:30px; color:#fff; z-index:1000; transition: transform 0.3s ease;
}
#menuToggle:hover{ transform: scale(1.15) rotate(5deg); }

#menu {
    position:fixed; bottom:100px; right:30px; display:flex; flex-direction:column; gap:18px; opacity:0; pointer-events:none; transition: all 0.4s ease;
}
#menu.active{ opacity:1; pointer-events:auto; transform: translateY(0); }

.menu-item {
    width:55px; height:55px; border-radius:50%; background:#ff69b4; display:flex; justify-content:center; align-items:center; color:#fff; font-size:20px; text-decoration:none; position:relative; transition: transform 0.3s ease, background 0.3s ease;
}
.menu-item:hover{ transform: scale(1.2) translateY(-5px); background:#ff85c1; }
.menu-item::after{
    content: attr(data-tooltip);
    position:absolute; right:110%; white-space: nowrap; background:#ff69b4; padding:5px 10px; border-radius:5px;
    opacity:0; pointer-events:none; transition: opacity 0.3s ease;
}
.menu-item:hover::after{ opacity:1; }

/* Back to Top button */
#backTop {
    position:fixed; bottom:100px; left:30px; width:50px; height:50px;
    background:#ff69b4; border-radius:50%; display:flex; justify-content:center; align-items:center; font-size:24px; color:#fff; cursor:pointer; opacity:0; transition: opacity 0.4s ease, transform 0.3s ease;
    z-index:1000;
}
#backTop:hover{ transform: scale(1.2); }
#backTop.show{ opacity:1; }

/* Footer overlay */
#footerOverlay {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: rgba(18,18,18,0.8);
    color: #ff69b4;
    text-align: center;
    padding: 8px 0;
    font-size: 16px;
    z-index: 999;
    pointer-events: none;
}
</style>
</head>
<body>

<div id="splash">gothbitch.es</div>
<div id="images"></div>
<button id="loadMore">Load More</button>

<!-- Floating Menu -->
<div id="menuToggle">☰</div>
<div id="menu">
    <a href="https://bready.lol" target="_blank" class="menu-item" data-tooltip="BREADY.LOL">B</a>
    <a href="https://example.com" target="_blank" class="menu-item" data-tooltip="Example">E</a>
</div>

<!-- Back to Top -->
<div id="backTop">↑</div>

<!-- Footer overlay -->
<div id="footerOverlay">Subreddit: r/GothGirls | Images loaded: 0</div>

<script>
const subreddit = 'GothGirls';
const imagesContainer = document.getElementById('images');
const loadMoreBtn = document.getElementById('loadMore');
const backTop = document.getElementById('backTop');
let after = null;
let loading = false;
let allImages = []; // store all image URLs

// Splash fade
window.addEventListener('load', ()=>{
    setTimeout(()=>{
        document.getElementById('splash').style.opacity=0;
        document.getElementById('images').style.opacity=1;
        setTimeout(()=>document.getElementById('splash').remove(),1000);
    },2000);
});

// Menu toggle
document.getElementById('menuToggle').addEventListener('click', ()=> document.getElementById('menu').classList.toggle('active'));

// Back to Top button
window.addEventListener('scroll', ()=>{
    if(window.scrollY > 400) backTop.classList.add('show');
    else backTop.classList.remove('show');
});
backTop.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

function shuffleArray(array){ return array.sort(()=>Math.random()-0.5); }

// Fetch posts
async function fetchImages(limit=50, type='hot'){
    if(loading) return [];
    loading = true;
    try{
        const url = after ? `https://www.reddit.com/r/${subreddit}/${type}.json?limit=${limit}&after=${after}`
                          : `https://www.reddit.com/r/${subreddit}/${type}.json?limit=${limit}`;
        const res = await fetch(url);
        const data = await res.json();
        after = data.data.after;
        return shuffleArray(data.data.children.map(post=>post.data.url).filter(url=>url.match(/\.(jpeg|jpg|gif|png)$/)));
    }catch(err){ console.error(err); return [];}
    finally{ loading=false; }
}

// Render visible images based on scroll + remove off-screen
function renderImages(){
    const scrollTop = window.scrollY;
    const windowHeight = window.innerHeight;
    const buffer = 1000; // extra pixels before/after
    imagesContainer.innerHTML = '';
    allImages.forEach(url=>{
        const img = document.createElement('img');
        img.src = url;
        imagesContainer.appendChild(img);
    });
}

// Virtual scrolling + load more automatically
window.addEventListener('scroll', async ()=>{
    if(window.scrollY + window.innerHeight >= document.body.offsetHeight - 1000){
        const urls = await fetchImages(50);
        allImages.push(...urls);
        renderImages();
        updateFooter();
    }
});

// Initial load
(async function initialLoad(){
    const urls = await fetchImages(50);
    allImages.push(...urls);
    renderImages();
    updateFooter();
})();

// Load More button
loadMoreBtn.addEventListener('click', async ()=>{
    const urls = await fetchImages(50);
    allImages.push(...urls);
    renderImages();
    updateFooter();
});

// Auto-refresh new images at top
setInterval(async ()=>{
    const urls = await fetchImages(20,'new');
    allImages.unshift(...urls);
    renderImages();
    updateFooter();
},30000);

// Footer update
function updateFooter(){
    document.getElementById('footerOverlay').textContent = `Subreddit: r/${subreddit} | Images loaded: ${allImages.length}`;
}
</script>
</body>
</html>
